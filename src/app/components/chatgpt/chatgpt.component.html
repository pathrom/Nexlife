<div class="chat-container">
  <div class="chat-history">
    <div *ngIf="!callFirstTime" class="containerLottie">
      <ng-lottie
        containerClass="moving-box another-class"
        [styles]="styles"
        [options]="options"
      ></ng-lottie>
    </div>

    <div
      *ngFor="let item of chatHistory"
      [ngClass]="{
        'user-message': item.type === 'user',
        'bot-message': item.type === 'bot'
      }"
    >
      <div class="message">
        {{ item.message }}
      </div>
    </div>
    <div class="loading-indicator" *ngIf="isLoading">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
  <div class="chat-input">
    <div class="card flex flex-column md:flex-row gap-3">
      <div class="p-inputgroup">
        <input
          type="text"
          pInputText
          [(ngModel)]="message"
          (keyup.enter)="callChatGpt()"
          placeholder="Write your message..."
        />
        <button
          type="button"
          pButton
          icon="pi pi-send"
          class="sendButton"
          (click)="callChatGpt()"
        ></button>
      </div>
    </div>
  </div>

  <div class="devModeZone">
    <div *ngIf="isDevMode" class="costTokens">{{ costMsg }}</div>

    <div *ngIf="isDevMode">
      <p-button
        label="Change Version Chat GPT 3"
        (onClick)="changeVersionChatGPT('3')"
      ></p-button>

      <p-button
        label="Change Version Chat GPT 4"
        (onClick)="changeVersionChatGPT('4')"
      ></p-button>

      <p-button
        label="Reset History Chat"
        (onClick)="resetHistoryChat()"
      ></p-button>
    </div>
  </div>
</div>
